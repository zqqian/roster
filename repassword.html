
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>重置密码</title>
    <script src="../js/jquery-3.2.1.js"></script>
    <style>
        /*为适应低版本的浏览器而设置*/
        header,section,footer,aside,nav,main,article,figure {display:block;}
        .password{border-left-color:#000;margin:30%;  }
    </style>
</head>
<body>
<center>
    <form action="repassword.php" method="post" id="repassword">
        <input type="password" name="oldpassword" id="oldpassword" placeholder="请输入原密码">
        <input type="password" name="newpassword" id="newpassword" placeholder="请输入新密码">
        <input type="password" name="renewpassword" id="renewpassword"placeholder="重新输入新密码">
        <span id="repasswordspan">原密码输入不正确</span>
        <button type="submit" id="tijiao">提交</button>
        <button type="reset" id="chongzhi">重置</button>
    </form>
</center>
<script>
    $(function(){
    $("#repassword").submit(function(event) {
        var oldpassword = $("#oldpassword").val();
        var newpassword = $("#newpassword").val();
        var renewpassword = $("#renewpassword").val();
        $.get("repassword.php", function (data) {
            if (data != oldpassword) {
                event.preventDefault();
                $("#repasswordspan").html("*原密码输入错误");
                $("oldpassword").focus();
            }
        });
        if (newpassword == "") {
            event.preventDefault();
            $("#repasswordspan").html("*密码不能为空");
            $("#newpassword").focus();
        }
        else if (newpassword.length < 6) {
            event.preventDefault();
            $("#repasswordspan").html("*密码不能低于6位");
            $("#newpassword").focus();
        }
        else if (oldpassword == newpassword) {
            event.preventDefault();
            $("#repasswordspan").html("*新密码与旧密码一致");
            $("#newpassword").focus();
        }
        else if (newpassword != renewpassword) {
            event.preventDefault();
            $("#repasswordspan").html("*两次输入新密码不一致");
            $("#newpassword").html("请输入新密码");
            $("#renewpassword").html("请重新输入新密码");
            $("newpassword").focus();
        }
        else {
            $.post("repassword.php", {newpassword: newpassword}, function (data) {
                if (data == 1)
                    alert("密码修改成功！")
            })
        }
    })
    });
</script>
</body>
</html>
